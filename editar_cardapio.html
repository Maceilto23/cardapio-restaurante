<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Editor Completo de Cardápio</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background: #eee; }
  input { width: 100%; box-sizing: border-box; padding: 5px; }
  button { padding: 8px 15px; margin-top: 10px; cursor: pointer; }
</style>
</head>
<body>

<h1>Editor de Cardápio (Planilha)</h1>

<h2>Horário de Funcionamento</h2>
<table>
<tr>
  <th>Abertura</th>
  <th>Fechamento</th>
</tr>
<tr>
  <td><input type="time" id="abertura"></td>
  <td><input type="time" id="fechamento"></td>
</tr>
</table>

<h2>Valores Marmita</h2>
<table>
<tr>
  <th>Pequena</th>
  <th>Grande</th>
</tr>
<tr>
  <td><input type="number" id="valorPequena"></td>
  <td><input type="number" id="valorGrande"></td>
</tr>
</table>

<h2>Cardápio Semanal</h2>
<table id="cardapioTable">
<tr>
  <th>Dia</th>
  <th>Carnes (separadas por vírgula)</th>
  <th>Acompanhamentos (separados por vírgula)</th>
</tr>
</table>

<h2>Locais de Entrega</h2>
<table id="locaisTable">
<tr>
  <th>Nome</th>
  <th>Taxa</th>
  <th>Ação</th>
</tr>
</table>
<button onclick="addLocal()">Adicionar Local</button>

<h2>Formas de Pagamento</h2>
<input type="text" id="formasPagamento" placeholder="Separe por vírgula">

<br>
<button onclick="salvarJSON()">Salvar Tudo</button>

<script>
let cardapioJSON = JSON.parse(localStorage.getItem('cardapioJSON')) || {
  "horarioFuncionamento": { "abertura": "11:30", "fechamento": "14:00" },
  "valoresMarmita": { "Pequena": 15, "Grande": 20 },
  "cardapio": {
    "segunda-feira": { "carnes": ["Costela com mandioca", "Frango ao molho", "Peito de frango grelhado"], "acompanhamentos": ["Arroz", "Feijão", "Macarrão alho e óleo", "Purê", "Farofa", "Verduras cozidas", "Salada"] },
    "terça-feira": { "carnes": ["Churrasco", "Carne de porco frita", "Frango ao molho"], "acompanhamentos": ["Arroz", "Feijão", "Macarrão alho e óleo", "Farofa", "Verduras cozidas", "Salada", "Batata frita"] },
    "quarta-feira": { "carnes": ["Churrasco", "Strogonoff de frango", "Frango ao molho"], "acompanhamentos": ["Arroz", "Feijão", "Macarrão alho e óleo", "Farofa", "Verduras cozidas", "Salada", "Batata palha", "Batata temperada"] },
    "quinta-feira": { "carnes": ["Churrasco", "Frango ao molho", "Fígado"], "acompanhamentos": ["Arroz", "Feijão", "Macarrão alho e óleo", "Farofa", "Verduras cozidas", "Salada", "Batata frita"] },
    "sexta-feira": { "carnes": ["Churrasco", "Frango ao molho", "Coxa e sobrecoxa assada"], "acompanhamentos": ["Arroz", "Feijão", "Macarrão alho e óleo", "Farofa", "Verduras cozidas", "Salada", "Batata frita"] },
    "sábado": { "carnes": ["Churrasco", "Feijoada", "Frango ao molho"], "acompanhamentos": ["Arroz", "Feijão", "Macarrão alho e óleo", "Farofa", "Verduras cozidas", "Salada", "Batata frita"] },
    "domingo": { "carnes": ["Churrasco", "Frango ao molho", "Lasanha"], "acompanhamentos": ["Arroz", "Feijão", "Macarrão alho e óleo", "Farofa", "Verduras cozidas", "Salada", "Maionese"] }
  },
  "locaisEntrega": [
    { "nome": "Boa Vista 1", "taxa": 2.00 },
    { "nome": "Boa Vista 2", "taxa": 4.00 }
  ],
  "formasPagamento": ["Dinheiro", "Pix", "Cartão de Crédito"]
};

function preencherCampos() {
  document.getElementById('abertura').value = cardapioJSON.horarioFuncionamento.abertura;
  document.getElementById('fechamento').value = cardapioJSON.horarioFuncionamento.fechamento;
  document.getElementById('valorPequena').value = cardapioJSON.valoresMarmita.Pequena;
  document.getElementById('valorGrande').value = cardapioJSON.valoresMarmita.Grande;
  
  // Cardápio semanal
  const cardapioTable = document.getElementById('cardapioTable');
  cardapioTable.innerHTML = `<tr>
    <th>Dia</th>
    <th>Carnes (separadas por vírgula)</th>
    <th>Acompanhamentos (separados por vírgula)</th>
  </tr>`;
  for (let dia in cardapioJSON.cardapio) {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${dia}</td>
      <td><input type="text" value="${cardapioJSON.cardapio[dia].carnes.join(', ')}" data-dia="${dia}" data-tipo="carnes"></td>
      <td><input type="text" value="${cardapioJSON.cardapio[dia].acompanhamentos.join(', ')}" data-dia="${dia}" data-tipo="acompanhamentos"></td>`;
    cardapioTable.appendChild(row);
  }

  // Locais de entrega
  const locaisTable = document.getElementById('locaisTable');
  locaisTable.innerHTML = `<tr>
    <th>Nome</th>
    <th>Taxa</th>
    <th>Ação</th>
  </tr>`;
  cardapioJSON.locaisEntrega.forEach((local, idx) => {
    const row = document.createElement('tr');
    row.innerHTML = `<td><input type="text" value="${local.nome}" data-idx="${idx}" data-campo="nome"></td>
                     <td><input type="number" value="${local.taxa}" step="0.01" data-idx="${idx}" data-campo="taxa"></td>
                     <td><button onclick="removerLocal(${idx})">Remover</button></td>`;
    locaisTable.appendChild(row);
  });

  document.getElementById('formasPagamento').value = cardapioJSON.formasPagamento.join(', ');
}

function salvarJSON() {
  cardapioJSON.horarioFuncionamento.abertura = document.getElementById('abertura').value;
  cardapioJSON.horarioFuncionamento.fechamento = document.getElementById('fechamento').value;
  cardapioJSON.valoresMarmita.Pequena = parseFloat(document.getElementById('valorPequena').value);
  cardapioJSON.valoresMarmita.Grande = parseFloat(document.getElementById('valorGrande').value);

  // Cardápio semanal
  document.querySelectorAll('#cardapioTable input').forEach(input => {
    const dia = input.dataset.dia;
    const tipo = input.dataset.tipo;
    cardapioJSON.cardapio[dia][tipo] = input.value.split(',').map(s => s.trim()).filter(s => s);
  });

  // Locais de entrega
  document.querySelectorAll('#locaisTable input').forEach(input => {
    const idx = parseInt(input.dataset.idx);
    const campo = input.dataset.campo;
    if (campo === 'nome') cardapioJSON.locaisEntrega[idx].nome = input.value;
    if (campo === 'taxa') cardapioJSON.locaisEntrega[idx].taxa = parseFloat(input.value);
  });

  // Formas de pagamento
  cardapioJSON.formasPagamento = document.getElementById('formasPagamento').value.split(',').map(s => s.trim()).filter(s => s);

  localStorage.setItem('cardapioJSON', JSON.stringify(cardapioJSON, null, 2));
  alert('Alterações salvas com sucesso!');
}

function addLocal() {
  cardapioJSON.locaisEntrega.push({ nome: "Novo Local", taxa: 0 });
  preencherCampos();
}

function removerLocal(idx) {
  cardapioJSON.locaisEntrega.splice(idx, 1);
  preencherCampos();
}

preencherCampos();
</script>

</body>
</html>
