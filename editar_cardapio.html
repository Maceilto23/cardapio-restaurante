<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Editar Cardápio JSON</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    h2 { margin-top: 30px; }
    form { background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
    label { display: block; margin: 8px 0 4px; font-weight: bold; }
    input, textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
    button { margin-top: 10px; padding: 10px 15px; border: none; border-radius: 6px; background: #007bff; color: #fff; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>Editor do Cardápio</h1>

  <!-- Formulário Horário -->
  <h2>Horário de Funcionamento</h2>
  <form id="formHorario">
    <label>Abertura:</label>
    <input type="time" id="abertura">
    <label>Fechamento:</label>
    <input type="time" id="fechamento">
    <button type="submit">Salvar Horário</button>
  </form>

  <!-- Formulário Valores Marmita -->
  <h2>Valores da Marmita</h2>
  <form id="formValores">
    <label>Pequena:</label>
    <input type="number" id="marmitaPequena" step="0.01">
    <label>Grande:</label>
    <input type="number" id="marmitaGrande" step="0.01">
    <button type="submit">Salvar Valores</button>
  </form>

  <!-- Formulário Cardápio -->
  <h2>Cardápio</h2>
  <form id="formCardapio">
    <label>Dia da Semana:</label>
    <select id="diaSemana">
      <option>segunda-feira</option>
      <option>terça-feira</option>
      <option>quarta-feira</option>
      <option>quinta-feira</option>
      <option>sexta-feira</option>
      <option>sábado</option>
      <option>domingo</option>
    </select>

    <label>Carnes (separadas por vírgula):</label>
    <textarea id="carnes"></textarea>

    <label>Acompanhamentos (separados por vírgula):</label>
    <textarea id="acompanhamentos"></textarea>

    <button type="submit">Salvar Cardápio do Dia</button>
  </form>

  <!-- Formulário Locais e Pagamentos -->
  <h2>Locais de Entrega</h2>
  <form id="formLocais">
    <label>Locais (formato: Nome=Taxa, separados por vírgula):</label>
    <textarea id="locaisEntrega"></textarea>
    <button type="submit">Salvar Locais</button>
  </form>

  <h2>Formas de Pagamento</h2>
  <form id="formPagamentos">
    <label>Opções (separadas por vírgula):</label>
    <textarea id="formasPagamento"></textarea>
    <button type="submit">Salvar Pagamentos</button>
  </form>

  <script>
    // Carregar JSON inicial
    let dados = JSON.parse(localStorage.getItem("cardapio")) || {
      horarioFuncionamento: { abertura: "11:30", fechamento: "14:00" },
      valoresMarmita: { Pequena: 15, Grande: 20 },
      cardapio: {},
      locaisEntrega: [],
      formasPagamento: []
    };

    // Preencher formulários
    document.getElementById("abertura").value = dados.horarioFuncionamento.abertura;
    document.getElementById("fechamento").value = dados.horarioFuncionamento.fechamento;

    document.getElementById("marmitaPequena").value = dados.valoresMarmita.Pequena;
    document.getElementById("marmitaGrande").value = dados.valoresMarmita.Grande;

    document.getElementById("locaisEntrega").value = dados.locaisEntrega.map(l => `${l.nome}=${l.taxa}`).join(", ");
    document.getElementById("formasPagamento").value = dados.formasPagamento.join(", ");

    // Alterar dia do cardápio
    const diaSemana = document.getElementById("diaSemana");
    const carnes = document.getElementById("carnes");
    const acompanhamentos = document.getElementById("acompanhamentos");

    diaSemana.addEventListener("change", () => {
      const dia = diaSemana.value;
      carnes.value = dados.cardapio[dia]?.carnes.join(", ") || "";
      acompanhamentos.value = dados.cardapio[dia]?.acompanhamentos.join(", ") || "";
    });
    diaSemana.dispatchEvent(new Event("change"));

    // Salvando dados
    document.getElementById("formHorario").onsubmit = e => {
      e.preventDefault();
      dados.horarioFuncionamento.abertura = document.getElementById("abertura").value;
      dados.horarioFuncionamento.fechamento = document.getElementById("fechamento").value;
      salvar();
    };

    document.getElementById("formValores").onsubmit = e => {
      e.preventDefault();
      dados.valoresMarmita.Pequena = parseFloat(document.getElementById("marmitaPequena").value);
      dados.valoresMarmita.Grande = parseFloat(document.getElementById("marmitaGrande").value);
      salvar();
    };

    document.getElementById("formCardapio").onsubmit = e => {
      e.preventDefault();
      const dia = diaSemana.value;
      dados.cardapio[dia] = {
        carnes: carnes.value.split(",").map(s => s.trim()).filter(Boolean),
        acompanhamentos: acompanhamentos.value.split(",").map(s => s.trim()).filter(Boolean)
      };
      salvar();
    };

    document.getElementById("formLocais").onsubmit = e => {
      e.preventDefault();
      dados.locaisEntrega = document.getElementById("locaisEntrega").value.split(",").map(s => {
        let [nome, taxa] = s.split("=");
        return { nome: nome.trim(), taxa: parseFloat(taxa) };
      }).filter(l => l.nome);
      salvar();
    };

    document.getElementById("formPagamentos").onsubmit = e => {
      e.preventDefault();
      dados.formasPagamento = document.getElementById("formasPagamento").value.split(",").map(s => s.trim()).filter(Boolean);
      salvar();
    };

    function salvar() {
      localStorage.setItem("cardapio", JSON.stringify(dados));
      alert("Dados salvos com sucesso!");
    }
  </script>
</body>
</html>
