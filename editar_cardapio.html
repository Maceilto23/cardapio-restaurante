<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Editor de Cardápio</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
  h2 { margin-top: 30px; }
  label { display: block; margin-top: 10px; font-weight: bold; }
  input, textarea { width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
  textarea { resize: vertical; }
  button { margin-top: 20px; padding: 10px 20px; border: none; background: #4CAF50; color: white; border-radius: 5px; cursor: pointer; }
  button:hover { background: #45a049; }
  .card { background: white; padding: 15px; margin-top: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<h1>Editor de Cardápio</h1>

<div class="card">
  <h2>Horário de Funcionamento</h2>
  <label>Abertura</label>
  <input type="time" id="abertura">
  <label>Fechamento</label>
  <input type="time" id="fechamento">
</div>

<div class="card">
  <h2>Valores Marmita</h2>
  <label>Pequena</label>
  <input type="number" id="valorPequena" step="0.01">
  <label>Grande</label>
  <input type="number" id="valorGrande" step="0.01">
</div>

<div class="card">
  <h2>Cardápio por Dia</h2>
  <div id="diasCardapio"></div>
</div>

<div class="card">
  <h2>Locais de Entrega</h2>
  <div id="locaisEntrega"></div>
  <button onclick="adicionarLocal()">Adicionar Local</button>
</div>

<div class="card">
  <h2>Formas de Pagamento</h2>
  <textarea id="formasPagamento"></textarea>
</div>

<button onclick="salvarCardapio()">Salvar Alterações</button>

<script>
// Cardápio inicial (pode substituir pelo seu JSON)
let cardapioData = {
  "horarioFuncionamento": {"abertura": "11:30", "fechamento": "14:00"},
  "valoresMarmita": {"Pequena": 15, "Grande": 20},
  "cardapio": {
    "segunda-feira": {"carnes": ["Costela com mandioca","Frango ao molho"], "acompanhamentos":["Arroz","Feijão"]},
    "terça-feira": {"carnes": ["Churrasco"], "acompanhamentos":["Arroz","Feijão"]},
    "quarta-feira": {"carnes": ["Strogonoff de frango"], "acompanhamentos":["Arroz","Feijão"]},
    "quinta-feira": {"carnes": ["Fígado"], "acompanhamentos":["Arroz","Feijão"]},
    "sexta-feira": {"carnes": ["Coxa e sobrecoxa assada"], "acompanhamentos":["Arroz","Feijão"]},
    "sábado": {"carnes": ["Feijoada"], "acompanhamentos":["Arroz","Feijão"]},
    "domingo": {"carnes": ["Lasanha"], "acompanhamentos":["Arroz","Feijão"]}
  },
  "locaisEntrega": [{"nome":"Boa Vista 1","taxa":2.00}],
  "formasPagamento": ["Dinheiro","Pix"]
};

// Função para criar os inputs de cada dia
function carregarDias() {
  const container = document.getElementById("diasCardapio");
  container.innerHTML = "";
  for (let dia in cardapioData.cardapio) {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `<h3>${dia}</h3>
      <label>Carnes (separadas por vírgula)</label>
      <textarea data-dia="${dia}" data-tipo="carnes">${cardapioData.cardapio[dia].carnes.join(", ")}</textarea>
      <label>Acompanhamentos (separados por vírgula)</label>
      <textarea data-dia="${dia}" data-tipo="acompanhamentos">${cardapioData.cardapio[dia].acompanhamentos.join(", ")}</textarea>
    `;
    container.appendChild(div);
  }
}

// Função para carregar locais de entrega
function carregarLocais() {
  const container = document.getElementById("locaisEntrega");
  container.innerHTML = "";
  cardapioData.locaisEntrega.forEach((local, index) => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <label>Nome</label>
      <input type="text" value="${local.nome}" data-index="${index}" data-tipo="nome">
      <label>Taxa</label>
      <input type="number" step="0.01" value="${local.taxa}" data-index="${index}" data-tipo="taxa">
      <button onclick="removerLocal(${index})">Remover</button>
    `;
    container.appendChild(div);
  });
}

// Adicionar novo local
function adicionarLocal() {
  cardapioData.locaisEntrega.push({nome:"Novo Local", taxa:0});
  carregarLocais();
}

// Remover local
function removerLocal(index) {
  cardapioData.locaisEntrega.splice(index,1);
  carregarLocais();
}

// Carregar formulário com dados iniciais
document.getElementById("abertura").value = cardapioData.horarioFuncionamento.abertura;
document.getElementById("fechamento").value = cardapioData.horarioFuncionamento.fechamento;
document.getElementById("valorPequena").value = cardapioData.valoresMarmita.Pequena;
document.getElementById("valorGrande").value = cardapioData.valoresMarmita.Grande;
document.getElementById("formasPagamento").value = cardapioData.formasPagamento.join(", ");
carregarDias();
carregarLocais();

// Salvar alterações
function salvarCardapio() {
  cardapioData.horarioFuncionamento.abertura = document.getElementById("abertura").value;
  cardapioData.horarioFuncionamento.fechamento = document.getElementById("fechamento").value;
  cardapioData.valoresMarmita.Pequena = parseFloat(document.getElementById("valorPequena").value);
  cardapioData.valoresMarmita.Grande = parseFloat(document.getElementById("valorGrande").value);
  cardapioData.formasPagamento = document.getElementById("formasPagamento").value.split(",").map(x=>x.trim());

  // Dias
  document.querySelectorAll("#diasCardapio textarea").forEach(txt => {
    const dia = txt.dataset.dia;
    const tipo = txt.dataset.tipo;
    cardapioData.cardapio[dia][tipo] = txt.value.split(",").map(x=>x.trim());
  });

  // Locais
  document.querySelectorAll("#locaisEntrega input").forEach(input => {
    const index = input.dataset.index;
    const tipo = input.dataset.tipo;
    if(tipo === "nome") cardapioData.locaisEntrega[index].nome = input.value;
    if(tipo === "taxa") cardapioData.locaisEntrega[index].taxa = parseFloat(input.value);
  });

  console.log("Cardápio atualizado:", cardapioData);
  alert("Cardápio atualizado! Veja o console para verificar.");
}
</script>

</body>
</html>