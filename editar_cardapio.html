<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Editar Card√°pio</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    padding: 20px; 
    background:#f5f5f5; 
    margin:0;
  }
  h1 { 
    text-align:center; 
    color:#007BFF; 
    margin-bottom:20px; 
  }
  .dia-box { 
    margin-bottom:20px; 
    padding:15px; 
    background:#fff; 
    border-radius:8px; 
    box-shadow:0 2px 4px rgba(0,0,0,0.1); 
  }
  h2 { 
    margin-top:0; 
    color:#333; 
  }
  label { 
    font-weight:bold; 
    display:block; 
    margin:8px 0 5px; 
  }
  textarea { 
    width:100%; 
    height:70px; 
    border-radius:6px; 
    border:1px solid #ccc; 
    padding:8px; 
    font-family:monospace; 
    background:#fff; 
    resize:vertical; 
  }
  button { 
    margin-top:15px; 
    padding:12px; 
    background:#28A745; 
    color:#fff; 
    border:none; 
    border-radius:6px; 
    cursor:pointer; 
    width:100%; 
    font-weight:bold; 
    font-size:1rem;
    transition: all 0.2s;
  }
  button:hover { 
    background:#218838; 
  }
</style>
</head>
<body>

<h1>Editar Card√°pio Di√°rio</h1>
<div id="editor"></div>
<button id="salvar">üíæ Salvar Altera√ß√µes</button>

<script>
// Recupera dados do localStorage ou fallback para cardapioData global
let cardapioDataLS = JSON.parse(localStorage.getItem("cardapioData"));
let data = cardapioDataLS || (typeof cardapioData !== "undefined" ? cardapioData : { cardapio:{} });

const editor = document.getElementById("editor");

// Cria blocos por dia
for (let dia in data.cardapio) {
  let box = document.createElement("div");
  box.className = "dia-box";

  let titulo = document.createElement("h2");
  titulo.textContent = dia.charAt(0).toUpperCase() + dia.slice(1);

  // Carnes
  let labelCarnes = document.createElement("label");
  labelCarnes.textContent = "Carnes:";
  let textareaCarnes = document.createElement("textarea");
  textareaCarnes.id = "carnes_" + dia;
  textareaCarnes.value = (data.cardapio[dia].carnes || []).join(", ");

  // Acompanhamentos
  let labelAcomp = document.createElement("label");
  labelAcomp.textContent = "Acompanhamentos:";
  let textareaAcomp = document.createElement("textarea");
  textareaAcomp.id = "acomp_" + dia;
  textareaAcomp.value = (data.cardapio[dia].acompanhamentos || []).join(", ");

  box.appendChild(titulo);
  box.appendChild(labelCarnes);
  box.appendChild(textareaCarnes);
  box.appendChild(labelAcomp);
  box.appendChild(textareaAcomp);

  editor.appendChild(box);
}

// Salvar altera√ß√µes
document.getElementById("salvar").addEventListener("click", () => {
  for (let dia in data.cardapio) {
    let carnes = document.getElementById("carnes_" + dia).value
                  .split(",").map(x => x.trim()).filter(x => x);
    let acomp = document.getElementById("acomp_" + dia).value
                  .split(",").map(x => x.trim()).filter(x => x);
    data.cardapio[dia] = { carnes, acompanhamentos: acomp };
  }

  localStorage.setItem("cardapioData", JSON.stringify(data));
  alert("‚úÖ Card√°pio atualizado com sucesso!");
});
</script>

</body>
</html>