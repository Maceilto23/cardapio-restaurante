<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel do Cardápio Local - Mobile</title>
<style>
body { font-family: Arial, sans-serif; margin: 10px; background: #f9f9f9; }
h1,h2,h3 { color: #333; margin-bottom: 5px; }
label { display: block; margin-top: 10px; font-weight: bold; }
input[type=text], input[type=number] { width: 100%; padding:8px; margin-top:5px; font-size: 16px; }
button { padding:10px; margin-top:10px; background:#28a745; color:white; border:none; cursor:pointer; font-size:16px; border-radius:5px; }
button:hover { background:#218838; }
.day-section, .section { border:1px solid #ccc; padding:10px; margin-top:15px; border-radius:5px; background:#fff; }
.list-item { display:flex; flex-direction: column; gap:5px; margin-top:5px; }
.list-item input { flex:1; font-size: 16px; }
.list-item button { width: fit-content; align-self: flex-start; background:red; color:white; border:none; cursor:pointer; padding:5px 10px; font-size:14px; border-radius:3px; }
#status { margin-bottom:15px; font-size: 16px; }
@media(min-width:600px){
  .list-item { flex-direction: row; align-items: center; }
  .list-item button { margin-left:10px; align-self: auto; }
}
</style>
</head>
<body>

<h1>Painel do Cardápio Local</h1>
<div id="status">🔄 Pronto para edição</div>

<div id="painel">
  <div class="section">
    <h2>Horário de Funcionamento</h2>
    <label>Abertura: <input type="text" id="abertura" placeholder="Ex: 11:30"></label>
    <label>Fechamento: <input type="text" id="fechamento" placeholder="Ex: 14:00"></label>
  </div>

  <div class="section">
    <h2>Valores das Marmitas</h2>
    <div id="valoresMarmita"></div>
    <button onclick="addValorMarmita()">Adicionar Opção</button>
  </div>

  <div class="section">
    <h2>Cardápio Diário</h2>
    <div id="cardapioDias"></div>
    <button onclick="addDiaCardapio('Novo Dia')">Adicionar Dia</button>
  </div>

  <div class="section">
    <h2>Refrigerantes</h2>
    <div id="refrigerantes"></div>
    <button onclick="addRefrigerante('Lata')">Adicionar Lata</button>
    <button onclick="addRefrigerante('2 Litros')">Adicionar 2 Litros</button>
  </div>

  <div class="section">
    <h2>Locais de Entrega</h2>
    <div id="locaisEntrega"></div>
    <button onclick="addLocal()">Adicionar Local</button>
  </div>

  <div class="section">
    <h2>Formas de Pagamento</h2>
    <div id="formasPagamento"></div>
    <button onclick="addForma()">Adicionar Forma</button>
  </div>

  <button onclick="baixarJSON()">💾 Salvar/Download JSON</button>
</div>

<script>
// ===== FUNÇÕES DE CAMPOS =====
function addValorMarmita(nome='', preco=''){
  const div=document.createElement('div'); div.className='list-item';
  div.innerHTML=`<input type="text" placeholder="Nome da opção" value="${nome}">
                 <input type="number" placeholder="Preço" value="${preco}">
                 <button onclick="this.parentNode.remove()">X</button>`;
  document.getElementById('valoresMarmita').appendChild(div);
}

function addDiaCardapio(dia='Dia', dados={carnes:[], acompanhamentos:[]}){
  const div=document.createElement('div'); div.className='day-section';
  div.innerHTML=`<h3>${dia}</h3>
                 <strong>Carnes:</strong><div class="carnes"></div>
                 <button onclick="addItem(this.parentNode.querySelector('.carnes'))">Adicionar Carne</button>
                 <strong>Acompanhamentos:</strong><div class="acompanhamentos"></div>
                 <button onclick="addItem(this.parentNode.querySelector('.acompanhamentos'))">Adicionar Acompanhamento</button>`;
  document.getElementById('cardapioDias').appendChild(div);
  dados.carnes.forEach(c=>addItem(div.querySelector('.carnes'),c));
  dados.acompanhamentos.forEach(a=>addItem(div.querySelector('.acompanhamentos'),a));
}

function addItem(container,value=''){
  const div=document.createElement('div'); div.className='list-item';
  div.innerHTML=`<input type="text" value="${value}"><button onclick="this.parentNode.remove()">X</button>`;
  container.appendChild(div);
}

function addRefrigerante(tipo,nome='',preco=''){
  const container=document.createElement('div'); container.className='list-item'; container.dataset.tipo=tipo;
  container.innerHTML=`<strong>${tipo}:</strong>
                       <input type="text" placeholder="Nome" value="${nome}">
                       <input type="number" placeholder="Preço" value="${preco}">
                       <button onclick="this.parentNode.remove()">X</button>`;
  document.getElementById('refrigerantes').appendChild(container);
}

function addLocal(nome='',taxa=''){
  const div=document.createElement('div'); div.className='list-item';
  div.innerHTML=`<input type="text" placeholder="Local" value="${nome}">
                 <input type="number" placeholder="Taxa" value="${taxa}">
                 <button onclick="this.parentNode.remove()">X</button>`;
  document.getElementById('locaisEntrega').appendChild(div);
}

function addForma(valor=''){
  const div=document.createElement('div'); div.className='list-item';
  div.innerHTML=`<input type="text" placeholder="Forma de pagamento" value="${valor}">
                 <button onclick="this.parentNode.remove()">X</button>`;
  document.getElementById('formasPagamento').appendChild(div);
}

// ===== GERAR CARDÁPIO =====
function gerarCardapio(){
  const cardapio={
    horarioFuncionamento:{
      abertura:document.getElementById('abertura').value,
      fechamento:document.getElementById('fechamento').value
    },
    valoresMarmita:{}, cardapio:{}, refrigerantes:{Lata:[], '2 Litros':[]}, locaisEntrega:[], formasPagamento:[]
  };

  document.querySelectorAll('#valoresMarmita .list-item').forEach(d=>{
    const inputs=d.querySelectorAll('input'); 
    if(inputs[0].value) cardapio.valoresMarmita[inputs[0].value]=Number(inputs[1].value);
  });

  document.querySelectorAll('#cardapioDias .day-section').forEach(d=>{
    const dia=d.querySelector('h3').textContent;
    cardapio.cardapio[dia]={carnes:[],acompanhamentos:[]};
    d.querySelectorAll('.carnes input').forEach(i=>{if(i.value) cardapio.cardapio[dia].carnes.push(i.value);});
    d.querySelectorAll('.acompanhamentos input').forEach(i=>{if(i.value) cardapio.cardapio[dia].acompanhamentos.push(i.value);});
  });

  document.querySelectorAll('#refrigerantes .list-item').forEach(d=>{
    const tipo=d.dataset.tipo; const inputs=d.querySelectorAll('input');
    if(inputs[0].value) cardapio.refrigerantes[tipo].push({nome:inputs[0].value, preco:Number(inputs[1].value)});
  });

  document.querySelectorAll('#locaisEntrega .list-item').forEach(d=>{
    const inputs=d.querySelectorAll('input'); 
    if(inputs[0].value) cardapio.locaisEntrega.push({nome:inputs[0].value,taxa:Number(inputs[1].value)});
  });

  document.querySelectorAll('#formasPagamento .list-item input').forEach(i=>{if(i.value) cardapio.formasPagamento.push(i.value);});

  return cardapio;
}

// ===== BAIXAR JSON =====
function baixarJSON(){
  const cardapio = gerarCardapio();
  const blob = new Blob([JSON.stringify(cardapio, null, 2)], { type: 'application/json' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'cardapio.json';
  link.click();
  alert('✅ Arquivo cardapio.json gerado e pronto para upload manual no GitHub!');
}

// ===== INICIAR COM UM DIA PADRÃO =====
addDiaCardapio('Segunda-feira');
</script>

</body>
</html>